/**
 * @file: src/features/Dashboard/dashboard.css
 * @description: 数字化智造协同工作台样式 (一屏显示版 + 配置弹窗)
 */


/* --- 变量定义 --- */
:root {
    --theme-blue: #1890ff;
    --theme-blue-bg: #e6f7ff;
    --theme-green: #52c41a;
    --theme-green-bg: #f6ffed;
    --theme-orange: #faad14;
    --theme-orange-bg: #fffbe6;
    --theme-purple: #722ed1;
    --theme-purple-bg: #f9f0ff;
}

/* 关键：一屏布局容器 */
.dashboard-container.one-screen {
    height: 100vh; /* 占满视口高度 */
    overflow: hidden; /* 禁止整体滚动 */
    padding: 16px; /* 减小边距 */
    background-color: #f0f2f5;
    display: flex;
    flex-direction: column;
    gap: 12px;
    box-sizing: border-box;
}

/* --- Header Compact --- */
.dash-header.compact {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fff;
    padding: 12px 20px;
    border-radius: 6px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.02);
    flex-shrink: 0; /* 不允许压缩 */
}

.welcome-text h2 { margin: 0 0 4px 0; color: #333; }
.welcome-text p { margin: 0; color: #999; }

.header-stats { display: flex; gap: 20px; font-size: 13px; color: #666; }
.header-stats b { color: #1890ff; margin-left: 4px; font-size: 16px; }

/* --- KPI Grid Compact --- */
.kpi-grid.compact {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    flex-shrink: 0;
}

.kpi-card {
    background: #fff;
    border-radius: 6px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.02);
    transition: transform 0.2s;
}
.kpi-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.05); }

.kpi-icon.small {
    width: 40px; height: 40px; border-radius: 8px; font-size: 20px;
    display: flex; justify-content: center; align-items: center; flex-shrink: 0;
}

.kpi-content { flex: 1; overflow: hidden; }
.kpi-title { font-size: 13px; color: #666; margin-bottom: 2px; }
.kpi-row { display: flex; align-items: baseline; justify-content: space-between; margin-bottom: 2px; }
.kpi-value { font-size: 24px; font-weight: bold; color: #333; font-family: 'Roboto', sans-serif; line-height: 1; }
.kpi-sub { font-size: 11px; color: #999; white-space: nowrap; }

.trend { font-size: 12px; font-weight: 500; display: flex; align-items: center; }
.trend.up { color: #52c41a; }
.trend.down { color: #ff4d4f; }
.trend.flat { color: #faad14; }

/* --- Main Layout Fill Height --- */
.dash-main-layout.fill-height {
    flex: 1;
    display: flex;
    gap: 12px;
    overflow: hidden; /* 内部滚动 */
    min-height: 0; /* 关键：允许 flex 子项收缩 */
}

.dash-left-col { flex: 2; display: flex; flex-direction: column; gap: 12px; overflow: hidden; }
.dash-right-col { flex: 1; display: flex; flex-direction: column; gap: 12px; overflow: hidden; }

/* --- Card Styles --- */
.dash-card {
    background: #fff;
    border-radius: 6px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.02);
    display: flex;
    flex-direction: column;
}

/* Flex Grow Helpers */
.flex-grow { flex: 1; min-height: 0; overflow: hidden; }
.flex-grow-half { flex: 1; min-height: 0; overflow: hidden; }

.card-header.small {
    padding: 10px 16px;
    border-bottom: 1px solid #f0f0f0;
    display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;
}
.card-title { font-size: 14px; font-weight: 600; color: #333; display: flex; align-items: center; gap: 6px; }
.card-title i { color: #1890ff; font-size: 16px; }
.card-extra { font-size: 12px; color: #666; cursor: pointer; }
.card-extra:hover { color: #1890ff; }

/* --- Shortcuts --- */
.shortcuts-card.compact .shortcuts-grid {
    display: grid; grid-template-columns: repeat(8, 1fr); /* 变宽 */
    padding: 12px 16px; gap: 12px;
}
.shortcut-item { display: flex; flex-direction: column; align-items: center; gap: 6px; cursor: pointer; transition: all 0.2s; position: relative; }
.shortcut-item:hover .sc-icon { transform: scale(1.1); }
.shortcut-item.empty { visibility: hidden; }

.sc-icon { width: 36px; height: 36px; border-radius: 10px; font-size: 18px; display: flex; justify-content: center; align-items: center; color: #fff; box-shadow: 0 2px 6px rgba(0,0,0,0.1); transition: transform 0.2s; }
.sc-name { font-size: 11px; color: #333; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%; }

/* --- Todo List Scrollable --- */
.todo-list.scrollable {
    flex: 1;
    overflow-y: auto;
    padding: 0 16px;
}

.todo-item {
    display: flex; align-items: center; gap: 12px; padding: 10px 0; border-bottom: 1px solid #f5f5f5;
    cursor: pointer; transition: background 0.2s;
}
.todo-item:hover { background: #fafafa; }
.todo-item:last-child { border-bottom: none; }

.todo-icon { width: 32px; height: 32px; border-radius: 50%; font-size: 16px; display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
.todo-icon.type-approval { background: #e6f7ff; color: #1890ff; }
.todo-icon.type-task { background: #f6ffed; color: #52c41a; }
.todo-icon.type-alert { background: #fff1f0; color: #ff4d4f; }
.todo-icon.type-notice { background: #fffbe6; color: #faad14; }

.todo-content { flex: 1; overflow: hidden; }
.todo-title { font-size: 13px; font-weight: 500; color: #333; margin-bottom: 2px; display: flex; align-items: center; gap: 6px; }
.tag-urgent { font-size: 10px; background: #ff4d4f; color: #fff; padding: 0 4px; border-radius: 2px; }
.todo-desc { font-size: 11px; color: #999; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.todo-meta { text-align: right; }
.todo-time { font-size: 11px; color: #ccc; margin-bottom: 4px; }
.mini-btn { padding: 2px 8px; font-size: 11px; border-radius: 2px; border: 1px solid #d9d9d9; background: #fff; cursor: pointer; color: #666; }
.mini-btn:hover { color: #1890ff; border-color: #1890ff; }

/* --- Chart Compact --- */
.chart-container.compact {
    flex: 1; /* 撑满父容器剩余高度 */
    min-height: 0;
    padding: 10px 16px 0 16px;
    display: flex; align-items: flex-end; justify-content: space-around;
}
.css-bar-chart {
    display: flex; align-items: flex-end; justify-content: space-between; width: 100%; height: 100%; border-bottom: 1px solid #eee;
}
.bar-group {
    display: flex; flex-direction: column; align-items: center; width: 30px; height: 90%; justify-content: flex-end;
}
.bar { width: 16px; background: linear-gradient(to top, #1890ff, #69c0ff); border-radius: 3px 3px 0 0; transition: height 0.5s ease-out; }
.bar-value { font-size: 10px; color: #1890ff; margin-bottom: 2px; font-weight: bold; }
.bar-label { margin-top: 4px; font-size: 10px; color: #999; }

/* --- Notice List Scrollable --- */
.notice-list.scrollable {
    flex: 1; overflow-y: auto; padding: 10px 16px;
}
.notice-item { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-size: 12px; cursor: pointer; }
.notice-tag { font-size: 10px; padding: 0 4px; border-radius: 2px; flex-shrink: 0; border: 1px solid transparent; }
.notice-tag.red { background: #fff1f0; color: #ff4d4f; border-color: #ffa39e; }
.notice-tag.blue { background: #e6f7ff; color: #1890ff; border-color: #91d5ff; }
.notice-tag.gray { background: #fafafa; color: #8c8c8c; border-color: #d9d9d9; }
.notice-text { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: #555; }
.notice-item:hover .notice-text { color: #1890ff; }

/* --- 快捷方式配置弹窗样式 --- */
.shortcut-config-container {
    height: 400px;
    overflow-y: auto;
    padding: 10px;
}

.sc-config-group {
    margin-bottom: 16px;
}

.sc-group-title {
    font-size: 13px;
    font-weight: bold;
    color: #333;
    padding-bottom: 8px;
    border-bottom: 1px solid #f0f0f0;
    margin-bottom: 10px;
}

.sc-group-items {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
}

.sc-option {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px;
    border: 1px solid #e8e8e8;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 12px;
    color: #666;
    position: relative;
}

.sc-option:hover {
    border-color: #1890ff;
    color: #1890ff;
}

.sc-option.selected {
    background-color: #e6f7ff;
    border-color: #1890ff;
    color: #1890ff;
}

.sc-option i:first-child {
    font-size: 16px;
}

.check-mark {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #fff;
    border-radius: 50%;
    color: #1890ff;
    font-size: 14px;
}